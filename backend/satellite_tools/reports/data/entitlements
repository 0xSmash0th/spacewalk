
columns:

	organization_id
	organization
	entitlement_type
	entitlement
	used

multival_columns:

	organization_id
	entitlement_type
	entitlement

sql:

	select organization_id,
		web_customer.name as organization,
		entitlement_type,
		entitlement,
		used
	from (
		select rhnprivatechannelfamily.org_id as organization_id,
			'channel' as entitlement_type,
			rhnchannelfamily.name as entitlement,
			rhnprivatechannelfamily.current_members as used
		from rhnchannelfamily, rhnprivatechannelfamily
		where rhnchannelfamily.id = rhnprivatechannelfamily.channel_family_id
		union all
		select rhnservergroup.org_id as organization_id,
			'system' as entitlement_type,
			rhnservergrouptype.name as entitlement,
			rhnservergroup.current_members as used
		from rhnservergroup, rhnservergrouptype
		where rhnservergroup.group_type = rhnservergrouptype.id
		) entitlements, web_customer
	where entitlements.organization_id = web_customer.id
	order by entitlements.organization_id,
		case when entitlement_type = 'channel' then 1 else 0 end,
		entitlement

