<pxt-passthrough>
<pxt-use class="Sniglets::HTML"/>
<pxt-use class="Sniglets::Users"/>
<pxt-use class="Grail::Frame"/>
<grail-canvas-template base="/templates/equals_sign.pxt" mode="main_canvas">
<div class="rhn-embedded-help">
<div class="rhn-embedded-help-NAVHEADER">
<table summary="Header navigation table" width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<th colspan="3" align="center">RHN Proxy Server 2.1: Installation Guide</th>
</tr>
<tr>
<td width="10%" align="left" valign="bottom">
<a href="quickstart-non-gui-clients-no-ssl.html">
<img src="/img/list-backward.gif" alt="Previous" border="0"/>
</a>
</td>
<td width="80%" align="center" valign="bottom">Appendix F. Quick Start Guide for Manual Installation and Configuration</td>
<td width="10%" align="right" valign="bottom">
<a href="quickstart-non-gui-client-ssl.html">
<img src="/img/list-forward.gif" alt="Next" border="0"/>
</a>
</td>
</tr>
</table>
</div>
<div class="rhn-embedded-help-SECT1">
<h2><a name="QUICKSTART-NON-GUI-CONFIGURE-SSL"/>F.6. Configure SSL</h2>
<p>        Although it is not a requirement, we strongly recommend end-to-end SSL 
        for the entire Spacewalk transaction set.  If Spacewalk clients are to connect 
        securely to the RHN Proxy Server, the server must have a valid SSL certificate.</p>
<p>        Follow these steps to generate a valid private certificate (which 
        assume you are running on the system acting as the RHN Proxy Broker Server).
        When filling out the various certificate forms in the steps
        below, be sure to enter information as correctly and consistently as 
        possible. Also make certain that any hostname information requested 
        matches the hostname for the RHN Proxy Server system itself.
      </p>
<p/>
<ul>
<li>
<p>Create a new directory (for example, 
            <tt class="rhn-embedded-help-FILENAME">/root/certs/</tt>) and make it your working
            directory.
          </p>
</li>
<li>
<p>Generate a private <em>certificate authority</em> key:</p>
<table class="rhn-embedded-help-SCREEN" bgcolor="#DCDCDC" width="90%">
<tr>
<td>
<pre class="rhn-embedded-help-SCREEN">
<tt class="rhn-embedded-help-COMMAND">openssl genrsa -des3 -out ca.key 1024</tt>
</pre>
</td>
</tr>
</table>
</li>
<li>
<p>Generate a certificate authority certificate, and sign it with the private certificate authority key:
          </p>
<table class="rhn-embedded-help-SCREEN" bgcolor="#DCDCDC" width="90%">
<tr>
<td>
<pre class="rhn-embedded-help-SCREEN">
<tt class="rhn-embedded-help-COMMAND">openssl req -new -x509 -days 365 -key ca.key -out ca.crt</tt>
</pre>
</td>
</tr>
</table>
<p>            This command generates a certificate authority certificate that expires in one
            year.  If you do not want to reconfigure SSL for this RHN Proxy Server in a
            year, make the <tt class="rhn-embedded-help-OPTION">-days</tt> parameter arbitrarily large.
          </p>
</li>
<li>
<p>Generate the server's private key with the following
          command:</p>
<table class="rhn-embedded-help-SCREEN" bgcolor="#DCDCDC" width="90%">
<tr>
<td>
<pre class="rhn-embedded-help-SCREEN">
<tt class="rhn-embedded-help-COMMAND">openssl genrsa -out server.key 1024</tt>
</pre>
</td>
</tr>
</table>
</li>
<li>
<p>Generate a certificate request:</p>
<table class="rhn-embedded-help-SCREEN" bgcolor="#DCDCDC" width="90%">
<tr>
<td>
<pre class="rhn-embedded-help-SCREEN">
<tt class="rhn-embedded-help-COMMAND">openssl req -new -key server.key -out server.csr</tt>
</pre>
</td>
</tr>
</table>
</li>
<li>
<p>Generate a server certificate by signing the certificate request
            with the private key and certificate for the certificate authority.</p>
<table class="rhn-embedded-help-SCREEN" bgcolor="#DCDCDC" width="90%">
<tr>
<td>
<pre class="rhn-embedded-help-SCREEN">
<tt class="rhn-embedded-help-COMMAND">sh /var/www/rhns/certs/sign.sh </tt>
</pre>
</td>
</tr>
</table>
<p>After this step, two RPM packages will appear in your directory:
            <tt class="rhn-embedded-help-FILENAME">rhns-ssl-cert-1.0-1.noarch.rpm</tt> and 
            <tt class="rhn-embedded-help-FILENAME">rhns-ca-cert-1.0-1.noarch.rpm</tt>
            (the version and release numbers may be different).
          </p>
</li>
<li>
<p>            Install the <tt class="rhn-embedded-help-FILENAME">rhns-ssl-cert</tt> RPM package
            on the machine acting as the RHN Proxy Broker Server:
          </p>
<table class="rhn-embedded-help-SCREEN" bgcolor="#DCDCDC" width="90%">
<tr>
<td>
<pre class="rhn-embedded-help-SCREEN">
<tt class="rhn-embedded-help-COMMAND">rpm -Uvh rhns-ssl-cert-1.0-1.noarch.rpm</tt>
</pre>
</td>
</tr>
</table>
</li>
<li>
<p>Distribute the <tt class="rhn-embedded-help-FILENAME">rhns-ca-cert</tt> RPM 
            package to all the client systems running the 
            <strong>Red Hat Update Agent</strong>.
          </p>
</li>
</ul>
</div>
<div class="rhn-embedded-help-NAVFOOTER">
<table summary="Footer navigation table" width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td width="33%" align="left" valign="top">
<a href="quickstart-non-gui-clients-no-ssl.html">
<img src="/img/list-backward.gif" alt="Previous" border="0"/>
</a>
</td>
<td width="34%" align="center" valign="top">
<a href="index.html" accesskey="H">Home</a>
</td>
<td width="33%" align="right" valign="top">
<a href="quickstart-non-gui-client-ssl.html">
<img src="/img/list-forward.gif" alt="Next" border="0"/>
</a>
</td>
</tr>
<tr>
<td width="33%" align="left" valign="top">Test RHN Proxy Server, No SSL</td>
<td width="34%" align="center" valign="top">
<a href="quickstart-non-gui.html" accesskey="U">Up</a>
</td>
<td width="33%" align="right" valign="top">Test RHN Proxy Server with SSL</td>
</tr>
</table>
</div>
</div>
</grail-canvas-template>
</pxt-passthrough>
